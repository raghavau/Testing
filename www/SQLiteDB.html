<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>SQLite DB Plugin</title>
        <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link rel="stylesheet" type="text/css" href="css/loading.css">
    </head>
    <body>
        <textarea id="txtLog" style="width: 100%; height: fit-content;"></textarea>
    </body>
</html>
<script type="text/javascript" src="js/jquery1.11.1-min.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript">
    document.addEventListener('deviceready', onDeviceReady, false);
    function onDeviceReady() {
        var db = window.sqlitePlugin.openDatabase({ name: 'my.db', location: 'default' });

        db.transaction(function (tx) {
            tx.executeSql('DROP TABLE IF EXISTS test_table');
            tx.executeSql('CREATE TABLE IF NOT EXISTS test_table (id integer primary key, data text, data_num integer)');

            // demonstrate PRAGMA:
            db.executeSql("pragma table_info (test_table);", [], function (res) {
                $("#txtLog").val("PRAGMA res: " + JSON.stringify(res));
            });

            tx.executeSql("INSERT INTO test_table (data, data_num) VALUES (?,?)", ["test", 100], function (tx, res) {
                $("#txtLog").val($("#txtLog").val() + "\n\rinsertId: " + res.insertId + " -- probably 1");
                $("#txtLog").val($("#txtLog").val() + "\n\rrowsAffected: " + res.rowsAffected + " -- should be 1");

                db.transaction(function (tx) {
                    tx.executeSql("select count(id) as cnt from test_table;", [], function (tx, res) {
                        $("#txtLog").val($("#txtLog").val() + "\n\rres.rows.length: " + res.rows.length + " -- should be 1");
                        $("#txtLog").val($("#txtLog").val() + "\n\rres.rows.item(0).cnt: " + res.rows.item(0).cnt + " -- should be 1");
                    });
                });

            }, function (e) {
                $("#txtLog").val($("#txtLog").val() + "\n\rERROR: " + e.message);
            });
        });
    }
</script>